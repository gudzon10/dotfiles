# PS1 bash prompt config
# OLD: PS1='${debian_chroot:+($debian_chroot)}\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$ '
RED="\e[31m"
GREEN="\e[32m"
GREENBOLD="\e[1;32m"
BLUE="\e[34m"
BLUEBOLD="\e[1;34m"
ENDCOLOR="\e[0m"
PROMPT_START="${GREENBOLD}\u@laptop${ENDCOLOR}:${BLUEBOLD}\w${ENDCOLOR}"
PROMPT_END=" $\n "
# PS1="${GREENBOLD}\u@\h${ENDCOLOR}:${BLUEBOLD}\w${ENDCOLOR}$\n "
PS1="${PROMPT_START}${PROMPT_END}"

# bash-git-prompt https://github.com/magicmonty/bash-git-prompt.git
# git clone https://github.com/magicmonty/bash-git-prompt.git ~/.bash-git-prompt --depth=1
GIT_PROMPT_THEME=Single_line_NoExitState_Gentoo
GIT_PROMPT_START="${PROMPT_START}"
GIT_PROMPT_END="${PROMPT_END}"
if [ -f "$HOME/.bash-git-prompt/gitprompt.sh" ]; then
    GIT_PROMPT_ONLY_IN_REPO=1
    source $HOME/.bash-git-prompt/gitprompt.sh
fi

# Self-added usable aliases
alias dc='docker compose'
alias clip='xclip -selection clipboard'
alias lls='ls -hAlFSr'
alias ll='ls -hAlFtr'
alias allupdate='sudo apt update && sudo apt upgrade -y && sudo apt autoremove -y && flatpak update -y'
alias glog="git log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit --date=relative"

dus () {
    if [ $# -gt 1 ]; then
        depth=$2
    else
        depth=1
    fi

    du -bah --max-depth=$depth $1 | sort -h
}

shistory () {
    history|awk '{print $2}'|awk 'BEGIN {FS="|"} {print $1}'|sort|uniq -c|sort -rn|head -30
}

s2history () {
    history|awk '{print $2,$3}'|awk 'BEGIN {FS="|"} {print $1,$2}'|sort|uniq -c|sort -rn|head -30
}


# Bash history conf
shopt -s histappend
shopt -s checkwinsize
shopt -s cdspell
shopt -s cmdhist
HISTSIZE=5000
HISTFILESIZE=5000
PROMPT_COMMAND="$PROMPT_COMMAND; history -a"
HISTCONTROL=ignoreboth:erasedups
HISTIGNORE="ls"

#eval "$(starship init bash)"
#
#function blastoff(){
#    history -a
#}
#starship_precmd_user_func="blastoff"
